(function(){var a=null,b,c=Array.prototype.slice;b=function(){var d="checked",c="width",e="container";function b(h,g){var a=this,d,c,f;a.elem=$(h);c=$.extend({},b.defaults,g);for(d in c){f=c[d];a[d]=f}a.elem.data(a.dataName,a);a.wrapCheckboxWithDivs();a.attachEvents();a.disableTextSelection();a.resizeHandle&&a.optionallyResize("handle");a.resizeContainer&&a.optionallyResize(e);a.initialPosition()}b.prototype.isDisabled=function(){return this.elem.is(":disabled")};b.prototype.wrapCheckboxWithDivs=function(){var e="</span>\n</label>",d="'>\n  <span>",c="<label class='",b="<div class='",a=this;a.elem.wrap(b+a.containerClass+"' />");a.container=a.elem.parent();a.offLabel=$(c+a.labelOffClass+d+a.uncheckedLabel+e).appendTo(a.container);a.offSpan=a.offLabel.children("span");a.onLabel=$(c+a.labelOnClass+d+a.checkedLabel+e).appendTo(a.container);a.onSpan=a.onLabel.children("span");return a.handle=$(b+a.handleClass+"'>\n  <div class='"+a.handleRightClass+"'>\n    <div class='"+a.handleCenterClass+"' />\n  </div>\n</div>").appendTo(a.container)};b.prototype.disableTextSelection=function(){var a=this;if($.browser.msie)return $([a.handle,a.offLabel,a.onLabel,a.container]).attr("unselectable","on")};b.prototype._getDimension=function(c,b){return $.fn.actual!=a?c.actual(b):c[b]()};b.prototype.optionallyResize=function(g){var a=this,f,b,d;d=a._getDimension(a.onLabel,c);b=a._getDimension(a.offLabel,c);if(g===e){f=d>b?d:b;f+=a._getDimension(a.handle,c)+a.handleMargin;return a.container.css({width:f})}else{f=d>b?d:b;return a.handle.css({width:f})}};b.prototype.onMouseDown=function(a){var c;a.preventDefault();if(this.isDisabled())return;c=a.pageX||a.originalEvent.changedTouches[0].pageX;b.currentlyClicking=this.handle;b.dragStartPosition=c;return b.handleLeftOffset=parseInt(this.handle.css("left"),10)||0};b.prototype.onDragMove=function(f,e){var a=this,d,c;if(b.currentlyClicking!==a.handle)return;c=(e+b.handleLeftOffset-b.dragStartPosition)/a.rightSide;if(c<0)c=0;if(c>1)c=1;d=c*a.rightSide;a.handle.css({left:d});a.onLabel.css({width:d+a.handleRadius});a.offSpan.css({marginRight:-d});return a.onSpan.css({marginLeft:-(1-c)*a.rightSide})};b.prototype.onDragEnd=function(g,f){var c=this,e;if(b.currentlyClicking!==c.handle)return;if(c.isDisabled())return;if(b.dragging){e=(f-b.dragStartPosition)/c.rightSide;c.elem.prop(d,e>=.5)}else c.elem.prop(d,!c.elem.prop(d));b.currentlyClicking=a;b.dragging=a;return c.didChange()};b.prototype.refresh=function(){return this.didChange()};b.prototype.didChange=function(){var a=this,b;if(typeof a.onChange==="function")a.onChange(a.elem,a.elem.prop(d));if(a.isDisabled()){a.container.addClass(a.disabledClass);return false}else a.container.removeClass(a.disabledClass);b=a.elem.prop(d)?a.rightSide:0;a.handle.animate({left:b},a.duration);a.onLabel.animate({width:b+a.handleRadius},a.duration);a.offSpan.animate({marginRight:-b},a.duration);return a.onSpan.animate({marginLeft:b-a.rightSide},a.duration)};b.prototype.attachEvents=function(){var e="mouseup touchend",d="mousemove touchmove",b,c,a;a=this;b=function(){return a.onGlobalMove.apply(a,arguments)};c=function(){a.onGlobalUp.apply(a,arguments);$(document).unbind(d,b);return $(document).unbind(e,c)};this.elem.change(function(){return a.refresh()});return this.container.bind("mousedown touchstart",function(){a.onMouseDown.apply(a,arguments);$(document).bind(d,b);return $(document).bind(e,c)})};b.prototype.initialPosition=function(){var a=this,b,d;b=a._getDimension(a.container,c);a.offLabel.css({width:b-a.containerRadius});d=a.containerRadius+1;if($.browser.msie&&$.browser.version<7)d-=3;a.rightSide=b-a._getDimension(a.handle,c)-d;if(a.elem.is(":checked")){a.handle.css({left:a.rightSide});a.onLabel.css({width:a.rightSide+a.handleRadius});a.offSpan.css({marginRight:-a.rightSide})}else{a.onLabel.css({width:0});a.onSpan.css({marginLeft:-a.rightSide})}if(a.isDisabled())return a.container.addClass(a.disabledClass)};b.prototype.onGlobalMove=function(a){var c;if(!(!this.isDisabled()&&b.currentlyClicking))return;a.preventDefault();c=a.pageX||a.originalEvent.changedTouches[0].pageX;if(!b.dragging&&Math.abs(b.dragStartPosition-c)>this.dragThreshold)b.dragging=true;return this.onDragMove(a,c)};b.prototype.onGlobalUp=function(a){var c;if(!b.currentlyClicking)return;a.preventDefault();c=a.pageX||a.originalEvent.changedTouches[0].pageX;this.onDragEnd(a,c);return false};b.defaults={duration:200,checkedLabel:"ON",uncheckedLabel:"OFF",resizeHandle:true,resizeContainer:true,disabledClass:"iCheckDisabled",containerClass:"iCheckContainer",labelOnClass:"iCheckLabelOn",labelOffClass:"iCheckLabelOff",handleClass:"iCheckHandle",handleCenterClass:"iCheckHandleCenter",handleRightClass:"iCheckHandleRight",dragThreshold:5,handleMargin:15,handleRadius:4,containerRadius:5,dataName:"iStyle",onChange:function(){}};return b}();$.iphoneStyle=this.iOSCheckbox=b;$.fn.iphoneStyle=function(){var d,g,i,e,j,k,f,n,o,l,h,m;d=1<=arguments.length?c.call(arguments,0):[];i=(o=(l=d[0])!=a?l.dataName:void 0)!=a?o:b.defaults.dataName;h=this.filter(":checkbox");for(f=0,n=h.length;f<n;f++){g=h[f];e=$(g).data(i);if(e!=a){j=d[0],k=2<=d.length?c.call(d,1):[];(m=e[j])!=a&&m.apply(e,k)}else new b(g,d[0])}return this};$.fn.iOSCheckbox=function(b){var c;if(b==a)b={};c=$.extend({},b,{resizeHandle:false,disabledClass:"iOSCheckDisabled",containerClass:"iOSCheckContainer",labelOnClass:"iOSCheckLabelOn",labelOffClass:"iOSCheckLabelOff",handleClass:"iOSCheckHandle",handleCenterClass:"iOSCheckHandleCenter",handleRightClass:"iOSCheckHandleRight",dataName:"iOSCheckbox"});return this.iphoneStyle(c)}}).call(this);