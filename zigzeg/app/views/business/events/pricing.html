<script>
$(function() {
	var checkEventType = function(val){
		$('.typeWrap').hide();
		$('.typeWrap .required').removeClass('required');	
			if(val == 1){
					$('#eventC_one').show();
					$('#eventC_endD').hide();
					$('#eventC_one input#start_date').addClass('required');
					
			}else if(val == 2){
					$('#eventC_one, #eventC_endD').show();
					$('#eventC_one input').addClass('required');
			}else if(val == 3){
					$('#eventC_day').show();
					$('#eventC_day select').addClass('required');
					
			}else if(val == 4){
					$('#eventC_date').show();
					$('#eventC_date select').addClass('required');
			}
		$("#locationFrm").validate();
	}
	$('.rEventType').change(function(e) {
    var val = $(this).val();
		checkEventType(val);
  });	
	checkEventType($(".rEventType:checked").val());					
	var dates = $("#start_date,#end_date").datepicker({
				dateFormat:'dd/mm/yy',
				minDate: 0,
				ampm: true,
				onSelect: function( selectedDate ) {
					var option = this.id == "start_date" ? "minDate" : "maxDate",
						instance = $( this ).data( "datepicker" ),
						date = $.datepicker.parseDate(
							instance.settings.dateFormat ||
							$.datepicker._defaults.dateFormat,
							selectedDate, instance.settings );
					dates.not( this ).datepicker( "option", option, date );
				}
			}
		);
		$('#start_icon').live('click',function(){$("#start_date").datepicker( "show" );});
		$('#end_icon').live('click',function(){$("#end_date").datepicker( "show" )});
		$('#start_time').timepicker({});$('#end_time').timepicker({});
		$('#paid_event_type,#free_event_type').change(function(){
				if($('#paid_event_type').is(':checked'))
					$('.pricingForm').slideDown();
				else
					$('.pricingForm').slideUp();
					
		});
});
</script>

<div class="packageBox pad_top20 pad_bot20 full">


<%= form_for @event, :url => business_event_path(@event), :html => { :id => "locationFrm", :method => :put, :class => "packageFrm" } do |f| %>          
  <%= hidden_field_tag :steps, "pricing" %>
									<div class="container_12 pad_bot20">
									  
                    <% if ["pricing", "complete"].include?(@event.status)%>
    									<div class="grid_9 numberMsg">
                        <ul class="advertBc margin_left_20">
                      		<li><h6 class="bold">EDIT THIS EVENT</h6></li>
                          <li><h6 class="bold"><%= @event.name rescue '' %></h6></li>
                        </ul>
                      </div>
                                                                
                    <% else %>
  										<div class="grid_9 numberMsg">
                        <ul class="advertBc">
                      		<li><h6 class="bold"><%= @event.is_complete? ? "EDIT" : "CREATE" %> EVENT</h6></li>
                          <li><h6 class="bold">STEP <div class="bubble"> 03 </div></h6></li>
                        </ul>
                      </div>
                    <% end %>
                    
                  </div>
                  
                 <div class="full stepBar relative" style="">
                  <ul class="stepBarUL">
                  		<li class=""><div class="absolute border_bar" id="border_bar"></div><a class="menuBar" href="<%= edit_business_event_path(@event) %>">EVENT DETAILS</a><div class="right_arrow"></div></li>
                      <li class=""><a class="menuBar" href="<%= locations_business_event_path(@event) %>">EVENT LOCATION</a><div class="right_arrow"></div></li>
                      <li class="selected"><a  class="menuBar" href="<%= pricing_business_event_path(@event) %>">DATE & PRICING</a><div class="right_arrow"></div></li>
                      <li ><a  class="menuBar" href="<%= gallery_business_event_path(@event) %>">GALLERY</a><div class="right_arrow"></div></li>
                  </ul>
                </div>
                  <div class="container_12 inputs pad_top">
										<div class="grid_3 align_right marginTop5"><label>Event type</label></div>
                    <div class="grid_9 marginTop5">
                    			<input type="radio" name="eventType" class="absolute rEventType required" value="1" />
                          <span class="margin_left_20">One day event</span><br />
                          <input type="radio" name="eventType" class="absolute rEventType" value="2" />
                          <span class="margin_left_20">Multi-day event</span><br />
                          <input type="radio" name="eventType" class="absolute rEventType" value="3" />
                          <span class="margin_left_20">Weekly event</span><br />
                          <input type="radio" name="eventType" class="absolute rEventType" value="4" />
                          <span class="margin_left_20">Monthly event</span>
                    </div>
                    <div class="prefix_3 grid_9"><label for="eventType" generated="false" class="error"></label></div>
                </div>
                
                	<!----------------- FOR MULTI DATES CONTAINER ------------------------>
                <div id="eventC_one" class="typeWrap">
                  <div class="full_width borderBot"></div>
                	<div class="container_12 inputs">
										<div class="grid_3 align_right pad_top20"><label>Event Start Date</label></div>
                    <div class="grid_9 pad_top"><input type="text" class="required text-input fancyinput narrower" id="start_date" name="user[start_date]" readonly="readonly" value="<%= formatted_date(@event.start_date, 'yyyymmdd') %>"><span class="margin_left_10"><img src="/images/cal.gif" id="start_icon"/> </span><br />
                    <label for="start_date" generated="false" class="error" ></label>
                    </div>
                    <div id="eventC_endD">
                    <div class="grid_3 align_right pad_top20"><label>Event End Date</label></div>
                    <div class="grid_9 pad_top"><input type="text" class="required text-input fancyinput narrower" id="end_date" readonly="readonly" name="user[end_date]" value="<%= formatted_date(@event.end_date, 'yyyymmdd') %>"><span class="margin_left_10"><img src="/images/cal.gif" id="end_icon"/> </span><br />
                    <label for="end_date" generated="false" class="error" ></label>
                    </div>
                    </div><!-- end container of end date -->
                  </div> 
                </div>
                <!----------------- FOR WEEKLY EVENT TYPE CONTAINER ------------------------>
                <div id="eventC_day" class="typeWrap">
                  <div class="full_width borderBot"></div>
                		<div class="container_12 inputs">
                    <div class="grid_3 align_right pad_top20"><label>Event Day</label></div>
                    <div class="grid_9 pad_top">
                    				<select name="event_weekly" class="autowidth radius5">
                            <option value="">Select a day</option>
                            </select><span> of every week</span></div>
                    <div class="prefix_3 grid_9"><label for="event_weekly" generated="false" class="error"></label></div>       
                  	</div>
                </div>  
                  <!----------------- FOR MONTHLY EVENT TYPE CONTAINER ------------------------>
                <div id="eventC_date" class="typeWrap">  
                  <div class="full_width borderBot"></div>
                		<div class="container_12 inputs">
                    <div class="grid_3 align_right pad_top20"><label>Event Day</label></div>
                    <div class="grid_9 pad_top">
                    				<select name="event_monthly" class="autowidth radius5">
                            <option value="">Select a date</option>
                            </select><span> of every month</span></div>
                     <div class="prefix_3 grid_9"><label for="event_monthly" generated="false" class="error"></label></div>       
                  </div>
                </div>	
                  <div class="full_width borderBot pad_top20"></div>
                	<div class="container_12 inputs pad_top">
										<div class="grid_3 align_right pad_top7"><label>Event Time</label></div>
                    <div class="grid_4">from&nbsp;&nbsp;<input type="text" class="required text-input fancyinput narrower" id="start_time" name="user[start_time]" value="<%= @event.start_time %>"><br />
                    <label for="start_time" generated="false" class="error" ></label>
                    </div>
                    <div class="grid_5">to&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" class="required text-input fancyinput narrower" id="end_time" name="user[end_time]" value="<%= @event.end_time %>"><br />
                    <label for="end_time" generated="false" class="error" ></label>
                    </div>
                    
                </div> 
                	<div class="full_width borderBot pad_top20"></div>
               		<div class="container_12 inputs pad_top">
										<div class="grid_3 align_right marginTop5 pad_top5 clearfix"><label>Pricing type</label></div>
                    <div class="grid_2 pad_top">
                      <input type="radio" id="free_event_type" name="event_type" value="free" <%= @event.event_type =='free' ? "checked" : "" %>><label for="free_event_type">FREE EVENT </label></div>
                    <div class="grid_7 pad_top"><input type="radio" id="paid_event_type" name="event_type" value="paid" class="" <%= @event.event_type=='paid' ? "checked" : "" %> ><label for="paid_event_type">PAID EVENT</label></div>

                    </div>
                   <div class="pricingForm pad_top pad_bot <%= @event.event_type =='paid' ? '' : 'dispNone' %> ">
                 			 <div class="container_12 inputs">
										<div class="grid_3 align_right clearfix pad_top7 bold">Price</div>
                    <div class="grid_3" >from RM &nbsp;<input type="text" name="from_price" class="text-input fancyinput narrow  " value="<%= @event.from_price rescue ''  %>"/></div>
										<div class="grid_3" >to RM &nbsp;<input type="text" name="to_price" class="text-input fancyinput narrow " value="<%= @event.to_price rescue ''  %>" /></div>

                    </div>
                		</div> 
                	<div class="full_width borderBot pad_top20"></div>
               		<div class="container_12 inputs pad_top20">
                		<div class="grid_8 prefix_3 ">
                		  <input type="submit" name="submit_save" class="radius5 userButton white cursor fleft width30" id="userSubmitBtn" value="Save and Next">
                    </div><div class="grid_1"><div class="grayLoader fright">Saving data</div>&nbsp;</div>
                </div>

<% end %>
</div>
